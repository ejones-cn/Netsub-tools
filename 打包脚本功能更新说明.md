# 打包脚本功能更新说明

## 新功能介绍

我们已经更新了打包脚本 `simple_pack.py`，现在支持同时生成两种版本的程序，满足您既需要独立运行版本又要减少360误报的需求。

### 支持的版本类型

1. **单文件版本 (--onefile)**
   - 独立可执行文件，方便携带和分发
   - 文件大小约为10-11MB
   - 位置：`dist\IP子网分割工具.exe`
   - 使用方法：`python simple_pack.py 1`

2. **目录版本 (--onedir)**
   - 包含多个文件，360对这种格式的误报率较低
   - 文件夹大小约为20-30MB
   - 位置：`dist\IP子网分割工具\IP子网分割工具.exe`
   - 使用方法：`python simple_pack.py 2` 或直接运行 `python simple_pack.py`

3. **同时生成两种版本**
   - 一次运行即可生成两种版本
   - 使用方法：`python simple_pack.py 3`

## 使用指南

### 基本使用

```bash
# 生成目录版本（默认，低误报率）
python simple_pack.py

# 生成单文件版本
python simple_pack.py 1

# 生成目录版本
python simple_pack.py 2

# 同时生成两种版本
python simple_pack.py 3
```

### 减少360误报的措施

1. **目录版本优先**：目录版本的误报率远低于单文件版本
2. **优化的单文件版本**：单文件版本已进行以下优化以减少误报：
   - 不使用UPX压缩
   - 禁用窗口回溯
   - 排除可能引起误报的模块（如win32api、win32com等）
3. **添加信任列表**：将程序添加到360的信任列表中
4. **提交误报反馈**：如果仍然被误报，可以向360提交误报反馈

## 最佳实践

1. **推荐使用目录版本**：如果您主要在本地使用，建议使用目录版本以获得最低的误报率
2. **需要分发时使用单文件版本**：如果您需要将程序分发给他人，单文件版本更方便携带
3. **同时生成两种版本**：如果您不确定使用哪种版本，可以同时生成两种版本，根据实际情况选择使用

## 文件结构

```
dist/
├── IP子网分割工具.exe              # 单文件版本
├── IP子网分割工具/                 # 目录版本文件夹
│   ├── IP子网分割工具.exe          # 目录版本主程序
│   ├── _internal/                  # 依赖文件
│   └── icon.ico                   # 图标文件
└── icon.ico                       # 图标文件
```

## 注意事项

1. 目录版本需要整个目录一起复制使用，不能单独复制主程序文件
2. 单文件版本虽然方便携带，但360的误报率可能会高一些
3. 如果遇到任何问题，可以参考 `解决方案说明.md` 文件或提交Issue

## 更新时间

2025年12月10日