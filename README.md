# IP子网切分工具 v1.1.0

一个功能强大、灵活易用的IP子网切分工具，可以将指定子网从父网络中精确切分出来，并全面展示各网段的详细信息。该工具提供Web界面和Windows GUI两种操作方式，满足不同场景下的使用需求。

## 🎯 功能特性

- ✅ **精确子网切分**：支持将任意CIDR格式的子网从父网络中精确切分
- ✅ **详细网段信息**：展示每个网段的完整信息，包括：
  - 网络地址、子网掩码、广播地址
  - CIDR表示、前缀长度
  - 地址总数、可用地址数量
  - 可用地址范围
- ✅ **剩余网段管理**：自动计算并显示剩余可用网段的完整列表
- ✅ **双界面支持**：
  - Web界面：跨平台访问，直观操作
  - Windows GUI界面：桌面应用，无需浏览器
- ✅ **可视化展示**：以图形方式直观显示网段分布和切分结果
- ✅ **导出功能**：支持将剩余网段列表导出为文本格式
- ✅ **批量处理**：支持一次处理多个子网切分请求
- ✅ **错误提示**：提供详细的输入验证和错误提示信息

## 📦 安装与依赖

### 系统要求
- Python 3.6+（支持Windows、macOS、Linux）
- Windows系统支持GUI界面
- 任意现代浏览器（用于Web界面）

### 安装方法

#### 1. 克隆或下载项目
```bash
git clone <repository-url>
cd Netsub tools
```

#### 2. 安装依赖
```bash
pip install -r requirements.txt
```

### 依赖说明

| 模块 | 用途 | 必要性 |
|------|------|--------|
| ipaddress | 核心IP计算功能 | 标准库，无需额外安装 |
| Flask | Web界面支持 | 可选，仅Web界面需要 |
| tkinter | Windows GUI界面 | 标准库，Windows系统默认安装 |

## 🚀 使用方法

### Web界面

**运行Python脚本**
```bash
python web_app.py
```

然后在浏览器中访问：`http://localhost:5000`

### Windows GUI界面

**方式一：直接运行Python脚本**
```bash
python windows_app.py
```

**方式二：使用批处理脚本**
```bash
.\run_app.bat
```

**方式三：使用编译好的可执行文件**
```bash
.\dist\IP子网分割工具.exe
```

### 使用示例

1. **基本用法**
   - 输入父网段：`192.168.0.0/16`
   - 输入要切分的子网：`192.168.1.0/24`
   - 点击"切分"按钮查看结果

2. **复杂网络切分**
   - 父网段：`10.0.0.0/8`
   - 切分网段：`10.10.0.0/16`
   - 结果将显示9个子网切分情况（包括切分网段本身）

## 🔧 工具原理

### 核心算法流程

1. **输入验证与解析**
   - 验证IP地址和CIDR格式的正确性
   - 检查切分网段是否属于父网段
   - 解析网络地址和子网掩码

2. **递归子网切分**
   - 采用二分法递归切分父网段
   - 直到找到包含目标子网的最小网段
   - 生成完整的网段树结构

3. **子网排除与剩余网段计算**
   - 从网段树中排除目标子网
   - 重新组织剩余网段
   - 计算每个剩余网段的详细信息

4. **子网聚合优化**
   - 自动合并相邻的子网
   - 减少输出网段数量
   - 优化结果展示

5. **结果生成与展示**
   - 格式化切分网段信息
   - 生成剩余网段列表
   - 可视化展示网段分布

### 技术实现细节

- **高效数据结构**：使用二叉树存储网段关系，提高查询效率
- **精确计算**：基于`ipaddress`模块实现IP地址和子网掩码的精确计算
- **边界处理**：完善的边界条件检查，确保结果准确性
- **性能优化**：针对大型网络（如/8）进行算法优化，减少计算时间

## 📁 文件结构

```
Netsub tools/
├── ip_subnet_calculator.py  # 核心计算模块
├── web_app.py               # Web界面实现
├── windows_app.py           # Windows GUI界面实现
├── run_app.bat              # Windows GUI启动脚本
├── simple_pack.py           # 打包脚本
├── icon.ico                 # 应用图标
├── icon.svg                 # 矢量图标
├── IMPLEMENTATION_SUMMARY.md # 实现总结文档
├── README.md                # 项目说明文档
├── requirements.txt         # 依赖配置文件
├── LICENSE                  # 许可证文件
├── .gitignore               # Git忽略配置
├── create_self_signed_cert.bat # 自签名证书创建脚本
├── 打包脚本功能更新说明.md    # 打包脚本更新文档
├── 数字签名使用说明.md        # 数字签名使用文档
└── 解决方案说明.md           # 解决方案文档
```

## 🎨 界面预览

### Web界面
- 简洁直观的表单布局
- 实时结果展示
- 响应式设计，支持移动端访问
- 三标签页布局：切分网段信息、剩余网段列表、网段分布图表
- 改进的网段分布图表，父网段与切分网段同级显示

### Windows GUI界面
- 传统Windows应用风格
- 多标签页组织功能
- 丰富的可视化元素
- 网段分布图表展示
- 结果导出功能

## ✨ 技术特点

- **纯Python实现**：跨平台支持，易于维护和扩展
- **轻量级设计**：核心功能仅依赖标准库，资源占用少
- **双界面架构**：同一套核心逻辑，两种展示方式
- **用户友好**：直观的操作流程，详细的帮助信息
- **可扩展**：模块化设计，便于添加新功能
- **高性能**：优化的算法确保在大型网络上的高效运行

## 📊 示例输出

### 示例1：192.168.0.0/16 切分 192.168.10.0/24

```
父网段: 192.168.0.0/16
切分网段: 192.168.10.0/24

=== 切分网段信息 ===
网络地址: 192.168.10.0
子网掩码: 255.255.255.0
广播地址: 192.168.10.255
CIDR表示: 192.168.10.0/24
前缀长度: 24
地址总数: 256
可用地址: 254
可用范围: 192.168.10.1 - 192.168.10.254

=== 剩余网段 (8 个) ===
1. 192.168.0.0/21
2. 192.168.8.0/23
3. 192.168.11.0/24
4. 192.168.12.0/22
5. 192.168.16.0/20
6. 192.168.32.0/19
7. 192.168.64.0/18
8. 192.168.128.0/17
```

### 示例2：10.0.0.0/8 切分 10.21.60.0/23

```
父网段: 10.0.0.0/8
切分网段: 10.21.60.0/23

=== 切分网段信息 ===
网络地址: 10.21.60.0
子网掩码: 255.255.254.0
广播地址: 10.21.61.255
CIDR表示: 10.21.60.0/23
前缀长度: 23
地址总数: 512
可用地址: 510
可用范围: 10.21.60.1 - 10.21.61.254

=== 剩余网段 (15 个) ===
1. 10.0.0.0/12
2. 10.16.0.0/14
3. 10.20.0.0/16
4. 10.21.0.0/19
5. 10.21.32.0/20
6. 10.21.48.0/21
7. 10.21.56.0/22
8. 10.21.62.0/23
9. 10.21.64.0/18
10. 10.21.128.0/17
11. 10.22.0.0/15
12. 10.24.0.0/13
13. 10.32.0.0/11
14. 10.64.0.0/10
15. 10.128.0.0/9
```

## ⚠️ 注意事项

1. **输入格式**：请确保输入的IP地址和CIDR格式正确（如：`192.168.0.0/16`）
2. **子网有效性**：切分的子网必须是父网段的有效子网（完全包含关系）
3. **性能考虑**：
   - 对于超大型网络（如/8），计算时间可能较长
   - 建议将大型网络拆分为多个较小的网段进行处理
4. **结果解读**：
   - 剩余网段列表会自动聚合相邻子网
   - 可用地址数量不包括网络地址和广播地址
5. **导出限制**：
   - 导出功能支持文本格式
   - 对于大量网段，导出文件可能较大

## 🔄 更新日志

### v1.1.0 (2025-12-10)
- ✨ 新增批量处理功能
- 🎨 优化Web界面响应式设计
- ⚡ 提升大型网络计算性能
- 📊 增强可视化展示效果，改进网段分布图表
- 🔧 修复Web版网段分布图表中父网段显示问题
- 🐛 修复已知bug

### v1.0.0 (2025-12-01)
- 🎉 初始版本发布
- ✅ 基本子网切分功能
- ✅ Web界面和Windows GUI界面
- ✅ 网段信息展示
- ✅ 剩余网段计算

## 🤝 贡献指南

欢迎提交Issue和Pull Request来帮助改进这个项目！

1. Fork本仓库
2. 创建功能分支：`git checkout -b feature/AmazingFeature`
3. 提交更改：`git commit -m 'Add some AmazingFeature'`
4. 推送到分支：`git push origin feature/AmazingFeature`
5. 提交Pull Request

## 📄 许可证

本项目采用MIT License开源许可证。详见[LICENSE](LICENSE)文件。

## 📞 联系方式

如有问题或建议，请通过以下方式联系：
- Issue：在GitHub仓库提交Issue
- Email：[ejones.cn@hotmail.com]

---

**IP子网切分工具** - 让IP地址管理变得简单高效！